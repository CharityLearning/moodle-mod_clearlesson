{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template mod_clearlesson/video_iframe

    Moodle template for the list of valid options in an autocomplate form element.
}}
<div class="mod-clearlesson">
    <div class="video-container" data-externalref="{{externalref}}">
        <iframe class="videoframe" src="{{src}}" title="{{name}}" frameborder="0" allowfullscreen></iframe>
        {{^inpage}}
            <script>
                require([{{#firstload}}'../../../mod/clearlesson/vimeo/vimeo-sdk', {{/firstload}}'mod_clearlesson/progress-tracker'],
                function({{#firstload}}VimeoPlayerConstructor, {{/firstload}}progressTracker) {
                    {{#firstload}}
                        window.VimeoPlayerConstructor = VimeoPlayerConstructor;
                    {{/firstload}}
                    // Here we initialise a new player for each video after destroying any previous instances.
                    {{^editform}}progressTracker.init();{{/editform}}
                });
            </script>
        {{/inpage}}
    </div>
    <div class="p-2 video-title-wrapper" style="position: relative">
        <h4 class="video-title">{{name}}</h4>
        {{> mod_clearlesson/elements/icons/watched_check}}
    </div>
</div>