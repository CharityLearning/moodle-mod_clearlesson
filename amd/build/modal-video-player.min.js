define("mod_clearlesson/modal-video-player",["exports","core/modal_save_cancel","core/templates","core/str","./utils"],(function(_exports,_modal_save_cancel,_templates,_str,Utils){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * A set of functions to be added to charts tab load-tabs.js.
   * Most of these functions enable modal forms for the adding/deleting of charts or editing existing charts.
   *
   * @module     mod_clearlesson/modal-resource-browser
   * @copyright  2024 Dan Watkins <dwatkins@charitylearning.org>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   * @since      2.9
   */var modalVideoPlayer;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_save_cancel=_interopRequireDefault(_modal_save_cancel),_templates=_interopRequireDefault(_templates),Utils=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Utils);_exports.init=()=>{document.addEventListener("click",(function(e){var _e$target,_e$target$classList,_e$target2,_e$target2$parentElem,element;if(null!==(_e$target=e.target)&&void 0!==_e$target&&null!==(_e$target$classList=_e$target.classList)&&void 0!==_e$target$classList&&_e$target$classList.contains("play-icon")?element=e.target:null!==(_e$target2=e.target)&&void 0!==_e$target2&&null!==(_e$target2$parentElem=_e$target2.parentElement.classList)&&void 0!==_e$target2$parentElem&&_e$target2$parentElem.contains("play-icon")&&(element=e.target.parentElement),element){var name;e.preventDefault(),name=element.closest(".menu-item-card")?element.closest(".menu-item-card").querySelector(".card-title").innerText:element.closest(".video-card-wrapper").querySelector(".card-title").innerText;const src=element.getAttribute("data-src");!async function(externalref,name,src){const{html:html,js:js}=await _templates.default.renderForPromise("mod_clearlesson/elements/video_iframe",{externalref:externalref,src:src,name:name}),videoPlayer=await _modal_save_cancel.default.create({title:(0,_str.get_string)("videoplayer","mod_clearlesson"),body:html,large:!0,show:!0});_templates.default.runTemplateJS(js),modalVideoPlayer=videoPlayer;const backString=await(0,_str.get_string)("back"),selectVideoString=await(0,_str.get_string)("selectvideo","mod_clearlesson"),modalRootInner=modalVideoPlayer.getRoot()[0].children[0];Utils.waitForElement(".modal-footer button.btn-secondary",modalRootInner,(function(){modalRootInner.querySelector(".modal-footer button.btn-secondary").innerHTML=backString})),Utils.waitForElement(".modal-footer button.btn-primary",modalRootInner,(function(){const saveButton=modalRootInner.querySelector(".modal-footer button.btn-primary");saveButton.innerHTML=selectVideoString,saveButton.setAttribute("data-action","select"),saveButton.setAttribute("data-type","play"),saveButton.setAttribute("data-externalref",externalref)})),videoPlayer.show()}(element.getAttribute("data-externalref"),name,src)}}))}}));

//# sourceMappingURL=modal-video-player.min.js.map